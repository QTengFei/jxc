(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2af971f3"],{"0fd6":function(e,t,a){},1954:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"background"},[e._m(0),a("footer",[a("h3",{staticClass:"t-h3"},[e._v("欢迎登陆进销存系统")]),a("div",{staticClass:"t-name"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{staticStyle:{"margin-left":"-50px"},attrs:{placeholder:"请输入账号",clearable:"","prefix-icon":"el-icon-zhanghaoguanli"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{staticStyle:{"margin-left":"-50px"},attrs:{type:"password",placeholder:"请输入密码",clearable:"","prefix-icon":"el-icon-mima",clearable:""},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1)],1)],1),a("div",{staticClass:"t-checkbox"},[a("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("是否记住此账号")])],1),a("div",{staticClass:"t-deng"},[a("el-button",{staticClass:"t-button",attrs:{type:"primary",round:"",plain:"",plain:!0},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("\n                登陆\n            ")])],1),a("div",{staticClass:"t-forget"},[a("span",{staticClass:"t-span"},[e._v("还没有账号?")]),a("router-link",{staticClass:"t-zhuce",attrs:{to:"/register"}},[e._v("去注册")])],1)])])},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("div",{staticClass:"t-pic"},[r("img",{attrs:{src:a("61d3"),alt:"图片受损"}})])])}],o=a("27b0"),n={data:function(){var e=function(e,t,a){if(!t)return a(new Error("账号不能为空"));a()},t=function(e,t,a){if(!t)return a(new Error("密码不能为空"));a()};return{checked:!1,ruleForm:{username:"",password:""},rules:{username:[{validator:e,trigger:"blur"}],password:[{validator:t,trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this,a=new URLSearchParams;a.append("username",this.ruleForm.username),a.append("password",this.ruleForm.password),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$axios.post(o["a"].contaUrl+"/user/login",a).then(function(e){400==e.data.code?t.$notify.error({title:"错误",message:"此账号不存在,请注册!"}):200==e.data.code?(console.log(t.checked),sessionStorage.setItem("token",e.data.data.token),1==t.checked&&localStorage.setItem("token",e.data.data.token),sessionStorage.setItem("role",e.data.data.role),sessionStorage.setItem("username",e.data.data.username),t.getUserInfo()):401==e.data.code&&t.$notify.error({title:"错误",message:"密码错误，请重试!"})}).catch(function(e){console.log(e),t.$message.error("用户名/密码错误,请重试!")})})},resetForm:function(e){this.$refs[e].resetFields()},getUserInfo:function(){var e=this,t=sessionStorage.getItem("token");console.log(t),this.$axios.get(o["a"].contaUrl+"/user/getUserInfo",{params:{token:t}}).then(function(t){200==t.data.code&&(sessionStorage.setItem("image",o["a"].contaUrl+"/"+t.data.data.user.image),sessionStorage.setItem("role",t.data.data.user.role),sessionStorage.setItem("username",t.data.data.user.realName),e.$router.push("/homepage")),console.log(t.data.data)}).catch(function(e){console.log(e)})}},created:function(){var e=localStorage.getItem("token");null!=e&&void 0!=e&&(sessionStorage.setItem("token",e),this.getUserInfo())}},i=n,l=(a("ad89"),a("2877")),c=Object(l["a"])(i,r,s,!1,null,null,null);c.options.__file="login.vue";t["default"]=c.exports},"27b0":function(e,t,a){"use strict";t["a"]={contaUrl:"http://www.sdjhfaj.xyz/invoicing"}},"61d3":function(e,t,a){e.exports=a.p+"img/小云朵.f12d2203.png"},ad89:function(e,t,a){"use strict";var r=a("0fd6"),s=a.n(r);s.a}}]);
//# sourceMappingURL=chunk-2af971f3.8d24c036.js.map